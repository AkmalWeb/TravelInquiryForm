<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Inquiry Form</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="form-container">
        <header class="form-header">
            <h1>Travel Inquiry Form</h1>
            <p>Fill out the details below to generate a pre-filled email for the travel agency.</p>
        </header>

        <form id="travelForm" novalidate>
            <div class="form-grid">
                <!-- Left Column: Core Details -->
                <div class="form-column">
                    <!-- Traveler & Itinerary Section -->
                    <fieldset class="form-section">
                        <legend>1. Traveler & Itinerary</legend>
                        <div class="fields-wrapper">
                            <div class="input-group">
                                <div>
                                    <label for="travelerName">Traveler Name 1 (as in passport) *</label>
                                    <input type="text" id="travelerName" required placeholder="First Last Name">
                                </div>
                                <div>
                                    <label for="travelerName2">Traveler Name 2 (optional)</label>
                                    <input type="text" id="travelerName2" placeholder="First Last Name">
                                </div>
                            </div>
                            <div class="input-group">
                                <div>
                                    <label for="fromAirport">From *</label>
                                    <input type="text" id="fromAirport" required placeholder="City, Country">
                                </div>
                                <div>
                                    <label for="destinationAirport">Destination *</label>
                                    <input type="text" id="destinationAirport" required placeholder="City, Country">
                                </div>
                            </div>
                            <div class="input-group">
                                <div>
                                    <label for="departureDate">Departure Date *</label>
                                    <input type="date" id="departureDate" required>
                                </div>
                                <div>
                                    <label for="departureTime">Departure Time</label>
                                    <select id="departureTime">
                                        <option value="morning">Morning</option>
                                        <option value="noon">Noon</option>
                                        <option value="afternoon">Afternoon</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <div>
                                    <label for="returnDate">Return Date *</label>
                                    <input type="date" id="returnDate" required>
                                </div>
                                <div>
                                    <label for="returnTime">Return Time</label>
                                    <select id="returnTime">
                                        <option value="morning">Morning</option>
                                        <option value="noon">Noon</option>
                                        <option value="afternoon">Afternoon</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- Customer Information -->
                    <fieldset class="form-section">
                        <legend>3. Customer & Project Details</legend>
                        <div class="fields-wrapper">
                            <div class="input-group">
                                <div>
                                    <label for="customerName">Customer/Event Name (optional)</label>
                                    <input type="text" id="customerName" placeholder="On-site contact or Event Name">
                                </div>
                                <div>
                                    <label for="customerAddress">Customer Address (optional)</label>
                                    <input type="text" id="customerAddress" placeholder="Company name and address">
                                </div>
                            </div>
                             <div class="input-group">
                                <div>
                                    <label for="CRMID">CRM/Case ID*</label>
                                    <input type="text" id="CRMID" required placeholder="Required for Services">
                                </div>
                                <div>
                                    <label for="projectNumber">Project Number*</label>
                                    <input type="text" id="projectNumber" required placeholder="Required">
                                </div>
                            </div>
                             <div class="input-group">
                                 <div>
                                    <label for="orderNumber">Order Confirmation Number (optional)</label>
                                    <input type="text" id="orderNumber" placeholder="Optional">
                                </div>
                                <div>
                                    <label for="costCenter">Cost Center*</label>
                                    <select id="costCenter" required>
                                        <option value="" selected disabled>Choose your department</option>
                                        <option value="8006500">8006500 Appl. Eng. Sim & Test</option>
                                        <option value="8006550">8006550 Appl. Eng. Sim & Test US</option>
                                        <option value="8001100">8001100 Assembly & Test</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label for="reasonForTravel">Reason for Travel*</label>
                                <textarea id="reasonForTravel" rows="3" required placeholder="e.g., Customer meeting, system maintenance..."></textarea>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <!-- Right Column: Additional Services & Costs -->
                <div class="form-column">
                     <!-- Additional Services -->
                    <fieldset class="form-section">
                        <legend>2. Travel Method</legend>
                        <div class="fields-wrapper" style="gap: 24px;">
                             <!-- Air Travel -->
                             <div>
                                <label for="TravelByAir">Air Travel</label>
                                <select id="TravelByAir">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                                <div id="TravelByAirFields" class="slide-down fields-wrapper" style="margin-top: 16px;">
                                    <div>
                                        <label for="TravelByAirLuggage">Check-in Luggage</label>
                                        <input type="number" value="0" id="TravelByAirLuggage" min="0" max="5">
                                    </div>
                                    <div>
                                        <label for="TravelByAirComments">Comments</label>
                                        <textarea id="TravelByAirComments" placeholder="e.g., preferred airline" rows="2"></textarea>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            <!-- Car Rental -->
                            <div>
                                <label for="carRental">Car Rental</label>
                                <select id="carRental">
                                    <option value="no">No</option>
                                    <option value="yes">Yes</option>
                                </select>
                                <div id="carRentalFields" class="slide-up fields-wrapper" style="margin-top: 16px;">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="carPickupSameAsDestination">
                                        <label for="carPickupSameAsDestination">Same details as Itinerary</label>
                                    </div>
                                     <div>
                                        <label for="carPickupLocation">Pick-up Location</label>
                                        <input type="text" id="carPickupLocation">
                                    </div>
                                    <div class="input-group">
                                        <div>
                                            <label for="carPickupDate">Pick-up Date</label>
                                            <input type="date" id="carPickupDate">
                                        </div>
                                        <div>
                                            <label for="carDropOffDate">Drop-off Date</label>
                                            <input type="date" id="carDropOffDate">
                                        </div>
                                    </div>
                                    <p class="note">Note: Car rental must not exceed €150/day.</p>
                                </div>
                            </div>
                            <hr/>
                            <!-- Accommodation -->
                            <div>
                                <label for="accommodation">Accommodation</label>
                                <select id="accommodation">
                                    <option value="no">No</option>
                                    <option value="yes">Yes</option>
                                </select>
                                <div id="accommodationFields" class="slide-up fields-wrapper" style="margin-top: 16px;">
                                     <div class="checkbox-group">
                                        <input type="checkbox" id="accommodationSameAsDestination">
                                        <label for="accommodationSameAsDestination">Same details as Itinerary</label>
                                    </div>
                                     <div>
                                        <label for="hotelLink">Hotel Details/Link</label>
                                        <input type="url" id="hotelLink" placeholder="Preferred hotel URL">
                                    </div>
                                     <div class="input-group">
                                        <div>
                                            <label for="checkInDate">Check-in Date</label>
                                            <input type="date" id="checkInDate">
                                        </div>
                                        <div>
                                            <label for="checkOutDate">Check-out Date</label>
                                            <input type="date" id="checkOutDate">
                                        </div>
                                    </div>
                                    <p class="note">Note: Hotel cost must not exceed €200/night without prior management approval.</p>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- Approval & Cost Section -->
                     <fieldset class="form-section">
                         <legend>4. Approval & Cost</legend>
                         <div class="fields-wrapper">
                            <div class="input-group">
                                 <div>
                                    <label for="quotedCosts">Quoted as actual costs?</label>
                                    <select id="quotedCosts">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                    <p id="quotedCostsNote" class="note hidden">Note: If yes, customer approval is required before booking.</p>
                                </div>
                                <div>
                                    <label for="managerApproved">Manager Approved?</label>
                                    <select id="managerApproved">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                        <option value="N/A">N/A</option>
                                    </select>
                                </div>
                            </div>
                            <div id="managerEmailField" class="slide-up" style="margin-top: 16px;">
                                <label for="managerEmail">Manager's Email</label>
                                <input type="email" id="managerEmail" placeholder="manager@example.com">
                            </div>
                             <hr/>
                             <!-- Cost Breakdown -->
                            <h3 style="font-size: 18px; font-weight: 600;">Cost Estimation</h3>
                            <button type="button" id="toggleBreakdownButton" class="btn btn-tertiary">Show/Hide Cost Calculator</button>
                            <div id="travelCostBreakdown" class="slide-up fields-wrapper">
                                <p style="color: #6b7280; font-size: 14px;">Adjust the values below to get a cost estimate.</p>
                                <div class="cost-calculator-grid">
                                    <div><label for="baseFlightFee">Flight (€)</label><input type="number" id="baseFlightFee" value="1000"></div>
                                    <div><label for="hotelFee">Hotel/night (€)</label><input type="number" id="hotelFee" value="150"></div>
                                    <div><label for="carRentalFee">Car/day (€)</label><input type="number" id="carRentalFee" value="120"></div>
                                    <div><label for="mealsCost">Meals/day (€)</label><input type="number" id="mealsCost" value="100"></div>
                                    <div><label for="laborRate">Labor/hr (€)</label><input type="number" id="laborRate" value="175"></div>
                                    <div><label for="totalLaborHours">Labor (hrs)</label><input type="number" id="totalLaborHours" value="8"></div>
                                    <div><label for="travelRate">Travel/hr (€)</label><input type="number" id="travelRate" value="175"></div>
                                    <div><label for="totalTravelHours">Travel (hrs)</label><input type="number" id="totalTravelHours" value="4"></div>
                                    <div class="full-span"><label for="miscellaneousRate">Misc. Costs (€)</label><input type="number" id="miscellaneousRate" value="50"></div>
                                </div>
                                <button type="button" id="calculateTotalCosts" class="btn btn-secondary">Calculate Estimated Costs</button>
                                <div id="totalCosts" class="total-costs-display slide-up"></div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <!-- Submission -->
            <div class="button-group">
                <button type="button" id="sendEmailButton" class="btn btn-primary">Generate & Send Inquiry</button>
            </div>
        </form>

        <!-- Footer -->
        <footer class="footer">
            <p>Did this tool help? <a href="https://www.paypal.com/donate/?hosted_button_id=8TFNXVNPKKX9Q" target="_blank" rel="noopener noreferrer">Show your appreciation</a>.</p>
            <p>Share your thoughts: <a href="https://ncv.microsoft.com/vpssNQPKlV" target="_blank" rel="noopener noreferrer">Feedback Form</a>.</p>
            <p>&copy; 2025 Akmal Zakeryaev. All Rights Reserved. Use at your own risk.</p>
        </footer>
    </div>
    
    <div id="messageModal" class="modal" role="alertdialog" aria-labelledby="modalTitle" aria-describedby="modalMessage">
        <div class="modal-content">
            <h3 id="modalTitle"></h3>
            <p id="modalMessage"></p>
            <button id="modalCloseButton" class="btn btn-primary">Got it</button>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- DOM Element References ---
    const form = document.getElementById('travelForm');
    const allInputs = form.querySelectorAll('input, select, textarea');
    
    // Date inputs
    const departureDateInput = document.getElementById('departureDate');
    const returnDateInput = document.getElementById('returnDate');
    const destinationInput = document.getElementById('destinationAirport');

    // Section Toggles & Content
    const toggleTriggers = {
        TravelByAir: document.getElementById('TravelByAir'),
        carRental: document.getElementById('carRental'),
        accommodation: document.getElementById('accommodation'),
        managerApproved: document.getElementById('managerApproved'),
        toggleBreakdownButton: document.getElementById('toggleBreakdownButton')
    };
    
    const toggleableSections = {
        TravelByAir: document.getElementById('TravelByAirFields'),
        carRental: document.getElementById('carRentalFields'),
        accommodation: document.getElementById('accommodationFields'),
        managerApproved: document.getElementById('managerEmailField'),
        costBreakdown: document.getElementById('travelCostBreakdown')
    };
    
    // Autofill checkboxes
    const carSameAsItinerary = document.getElementById('carPickupSameAsDestination');
    const accomSameAsItinerary = document.getElementById('accommodationSameAsDestination');
    
    // Buttons
    const calculateBtn = document.getElementById('calculateTotalCosts');
    const sendEmailBtn = document.getElementById('sendEmailButton');

    // Modal
    const modal = document.getElementById('messageModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalMessage = document.getElementById('modalMessage');
    const modalCloseBtn = document.getElementById('modalCloseButton');

    // --- UTILITY & UX FUNCTIONS ---

    function setMinDates() {
        const today = new Date().toISOString().split('T')[0];
        departureDateInput.setAttribute('min', today);
        returnDateInput.setAttribute('min', today);

        departureDateInput.addEventListener('change', () => {
            if (departureDateInput.value) {
                returnDateInput.setAttribute('min', departureDateInput.value);
            }
        });
    }

    function showModal(title, message) {
        modalTitle.textContent = title;
        modalMessage.textContent = message;
        modal.classList.add('visible');
    }

    function hideModal() {
        modal.classList.remove('visible');
    }
    
    function slideToggle(element, show) {
        if (element) {
            if (show) {
                element.classList.remove('slide-up');
                element.classList.add('slide-down');
            } else {
                element.classList.remove('slide-down');
                element.classList.add('slide-up');
            }
        }
    }

    function checkRequiredFields() {
        let allValid = true;
        form.querySelectorAll('[required]').forEach(field => {
            field.classList.remove('error-border');

            if (field.value.trim() === '') {
                field.classList.add('error-border');
                if (allValid) {
                    field.focus();
                }
                allValid = false;
            }
        });

        if (!allValid) {
            showModal('Missing Information', 'Please fill in all required fields, which are highlighted in red.');
        }
        return allValid;
    }

    function applyGlow(elements) {
        elements.forEach(el => {
            el.classList.add('autofill-glow');
            el.addEventListener('animationend', () => el.classList.remove('autofill-glow'), { once: true });
        });
    }

    function autofillDetails(isCar) {
        const sameCheckbox = isCar ? carSameAsItinerary : accomSameAsItinerary;
        const locationInput = isCar ? document.getElementById('carPickupLocation') : document.getElementById('hotelLink');
        const startDateInput = isCar ? document.getElementById('carPickupDate') : document.getElementById('checkInDate');
        const endDateInput = isCar ? document.getElementById('carDropOffDate') : document.getElementById('checkOutDate');

        const destination = destinationInput.value;
        const departureDate = departureDateInput.value;
        const returnDate = returnDateInput.value;

        const fieldsToUpdate = [locationInput, startDateInput, endDateInput];

        if (sameCheckbox.checked) {
            if (isCar) {
                locationInput.value = destination;
            } else {
                 locationInput.value = destination ? `Hotel in ${destination}`: '';
            }
            
            startDateInput.value = departureDate;
            endDateInput.value = returnDate;
            fieldsToUpdate.forEach(field => field.disabled = true);
            if (destination || departureDate || returnDate) {
                 applyGlow(fieldsToUpdate);
            }
        } else {
            fieldsToUpdate.forEach(field => {
                field.disabled = false;
                if (field.type !== 'checkbox') field.value = '';
            });
        }
    }

    function calculateTotalCosts() {
        const getVal = (id) => parseFloat(document.getElementById(id).value) || 0;

        const departureDate = new Date(departureDateInput.value);
        const returnDate = new Date(returnDateInput.value);
        if (isNaN(departureDate.getTime()) || isNaN(returnDate.getTime()) || returnDate < departureDate) {
            showModal('Invalid Dates', 'Please ensure departure and return dates are valid.');
            return;
        }

        const tripDays = Math.max(1, Math.ceil((returnDate - departureDate) / (1000 * 60 * 60 * 24)));

        let hotelCost = 0, hotelNights = 0;
        if (document.getElementById('accommodation').value === 'yes') {
            const checkIn = new Date(document.getElementById('checkInDate').value);
            const checkOut = new Date(document.getElementById('checkOutDate').value);
             if (!checkIn.value && !checkOut.value && (isNaN(checkIn.getTime()) || isNaN(checkOut.getTime()) || checkOut < checkIn)) {
                showModal('Invalid Hotel Dates', 'Please provide valid check-in and check-out dates.');
                return;
            }
            hotelNights = Math.max(0, Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24)));
            hotelCost = hotelNights * getVal('hotelFee');
        }

        let carCost = 0, rentalDays = 0;
        if (document.getElementById('carRental').value === 'yes') {
             const pickup = new Date(document.getElementById('carPickupDate').value);
            const dropoff = new Date(document.getElementById('carDropOffDate').value);
             if (!pickup.value && !dropoff.value && (isNaN(pickup.getTime()) || isNaN(dropoff.getTime()) || dropoff < pickup)) {
                showModal('Invalid Car Rental Dates', 'Please provide valid pick-up and drop-off dates.');
                return;
            }
            rentalDays = Math.max(1, Math.ceil((dropoff - pickup) / (1000 * 60 * 60 * 24)));
            carCost = rentalDays * getVal('carRentalFee');
        }
        
        const flightCost = getVal('baseFlightFee');
        const mealsTotalCost = tripDays * getVal('mealsCost');
        const laborCost = getVal('laborRate') * getVal('totalLaborHours');
        const travelCost = getVal('travelRate') * getVal('totalTravelHours');
        const miscellaneousCost = getVal('miscellaneousRate');

        const totalCost = flightCost + hotelCost + carCost + mealsTotalCost + laborCost + travelCost + miscellaneousCost;

        const breakdown = [
            { label: 'Flights', value: flightCost },
            { label: `Hotel (${hotelNights} nights)`, value: hotelCost, condition: document.getElementById('accommodation').value === 'yes' },
            { label: `Car (${rentalDays} days)`, value: carCost, condition: document.getElementById('carRental').value === 'yes' },
            { label: `Meals (${tripDays} days)`, value: mealsTotalCost },
            { label: 'Labor', value: laborCost },
            { label: 'Travel Time', value: travelCost },
            { label: 'Misc. Costs', value: miscellaneousCost },
        ];
        
        let breakdownHTML = `<span class="total-amount">&euro;${totalCost.toFixed(2)}</span> <ul>`;
        breakdown.forEach(item => {
            if(item.condition !== false && item.value > 0) {
                 breakdownHTML += `<li><span>${item.label}:</span> <span>&euro;${item.value.toFixed(2)}</span></li>`;
            }
        });
        breakdownHTML += `</ul>`;

        const totalCostsDiv = document.getElementById('totalCosts');
        totalCostsDiv.innerHTML = breakdownHTML;
        slideToggle(totalCostsDiv, true);
        
        return totalCost;
    }

    function composeEmail() {
        if (!checkRequiredFields()) return;

        sendEmailBtn.disabled = true;
        sendEmailBtn.textContent = 'Generating...';

        const totalCostValue = calculateTotalCosts();
        if (totalCostValue === undefined) {
            sendEmailBtn.disabled = false;
            sendEmailBtn.textContent = 'Generate & Send Inquiry';
            return;
        }

        const getStr = (id) => document.getElementById(id).value || 'N/A';
        const travelerName = getStr('travelerName');
        const projectNumber = getStr('projectNumber');
        const managerEmail = getStr('managerEmail');
        
        const subject = `Travel Inquiry: ${travelerName} to ${destinationInput.value} | Project: ${projectNumber}`;

        let body = `Dear Travel Team,\n\nPlease arrange travel with the following details:\n\n`;
        body += `--- Traveler Information ---\n`;
        body += `Traveler 1: ${travelerName}\n`;
        body += `Traveler 2: ${getStr('travelerName2')}\n\n`;

        body += `--- Itinerary ---\n`;
        body += `From: ${getStr('fromAirport')}\n`;
        body += `To: ${destinationInput.value}\n`;
        body += `Departure: ${getStr('departureDate')} (${getStr('departureTime')})\n`;
        body += `Return: ${getStr('returnDate')} (${getStr('returnTime')})\n\n`;
        
        if(document.getElementById('TravelByAir').value === 'yes'){
             body += `--- Air Travel ---\n`;
             body += `Checked Luggage: ${getStr('TravelByAirLuggage')}\n`;
             body += `Comments: ${getStr('TravelByAirComments')}\n\n`;
        }

        if (document.getElementById('accommodation').value === 'yes') {
            body += `--- Accommodation ---\n`;
            body += `Location/Hotel: ${accomSameAsItinerary.checked ? `Hotel in ${destinationInput.value}` : getStr('hotelLink')}\n`;
            body += `Check-in: ${getStr('checkInDate')}\n`;
            body += `Check-out: ${getStr('checkOutDate')}\n\n`;
        }

        if (document.getElementById('carRental').value === 'yes') {
            body += `--- Car Rental ---\n`;
            body += `Pick-up Location: ${carSameAsItinerary.checked ? destinationInput.value : getStr('carPickupLocation')}\n`;
            body += `Pick-up Date: ${getStr('carPickupDate')}\n`;
            body += `Drop-off Date: ${getStr('carDropOffDate')}\n\n`;
        }

        body += `--- Project & Justification ---\n`;
        body += `Customer/Event: ${getStr('customerName')}\n`;
        body += `Customer Address: ${getStr('customerAddress')}\n`;
        body += `Reason for Travel: ${getStr('reasonForTravel')}\n\n`;

        body += `--- Financials & Approval ---\n`;
        body += `Project Number: ${projectNumber}\n`;
        body += `CRM/Case ID: ${getStr('CRMID')}\n`;
        body += `Cost Center: ${getStr('costCenter')}\n`;
        body += `Quoted as Actual Costs: ${getStr('quotedCosts').toUpperCase()}\n`;
        body += `Manager Approved: ${getStr('managerApproved').toUpperCase()}\n`;
        if (getStr('managerApproved') === 'yes') {
            body += `Manager's Email (CC): ${managerEmail}\n`;
        }
        body += `\nEstimated Total Cost: €${totalCostValue.toFixed(2)}\n\n`;
        
        body += `Thank you,\n${travelerName}`;

        const mailtoURL = `mailto:travel_nl@moog.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}&cc=${managerEmail}`;

        window.location.href = mailtoURL;
        
        setTimeout(() => {
            sendEmailBtn.disabled = false;
            sendEmailBtn.textContent = 'Generate & Send Inquiry';
        }, 1000);
    }
    
    // --- Event Listeners Initialization ---
    calculateBtn.addEventListener('click', calculateTotalCosts);
    sendEmailBtn.addEventListener('click', composeEmail);
    modalCloseBtn.addEventListener('click', hideModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) hideModal();
    });

    carSameAsItinerary.addEventListener('change', () => autofillDetails(true));
    accomSameAsItinerary.addEventListener('change', () => autofillDetails(false));
    
    [destinationInput, departureDateInput, returnDateInput].forEach(el => {
        el.addEventListener('input', () => {
            if (carSameAsItinerary.checked) autofillDetails(true);
            if (accomSameAsItinerary.checked) autofillDetails(false);
        });
    });

    // Toggle visibility of conditional sections
    toggleTriggers.TravelByAir.addEventListener('change', (e) => slideToggle(toggleableSections.TravelByAir, e.target.value === 'yes'));
    toggleTriggers.carRental.addEventListener('change', (e) => slideToggle(toggleableSections.carRental, e.target.value === 'yes'));
    toggleTriggers.accommodation.addEventListener('change', (e) => slideToggle(toggleableSections.accommodation, e.target.value === 'yes'));
    toggleTriggers.managerApproved.addEventListener('change', (e) => slideToggle(toggleableSections.managerApproved, e.target.value === 'yes'));
    toggleTriggers.toggleBreakdownButton.addEventListener('click', () => {
        const isHidden = toggleableSections.costBreakdown.classList.contains('slide-up');
        slideToggle(toggleableSections.costBreakdown, isHidden);
    });
    
    document.getElementById('quotedCosts').addEventListener('change', (e) => {
        document.getElementById('quotedCostsNote').classList.toggle('hidden', e.target.value !== 'yes');
    });

    // Remove red border when user starts typing in a field
    allInputs.forEach(input => {
        input.addEventListener('input', () => {
            if (input.value.trim() !== '') {
                 input.classList.remove('error-border');
            }
        });
    });

    // --- INITIALIZATION ---
    setMinDates(); // Initialize date validation on page load
});
</script>

</body>
</html>
